<header class="w-full flex p-5 justify-center items-center fixed top-0 bg-white shadow z-10">
  <h1 class="text-4xl md:text-5xl font-bold">Sistema de Ranking</h1>
</header>

<main class="pt-32 px-5 w-full min-h-screen flex flex-col lg:flex-row justify-center items-start gap-10">
  <!-- Seção de Adicionar Perfil -->
  <section class="bg-white shadow-xl p-5 w-full lg:w-1/2 flex flex-col gap-5 rounded-xl">
    <h2 class="text-3xl font-bold">Adicionar Perfil</h2>
    <form [formGroup]="form" class="flex flex-col gap-5">
      <div class="flex flex-col">
        <label for="txtName" class="text-xl font-medium">Nome</label>
        <input type="text" formControlName="name" id="txtName" name="txtName" placeholder="John Doe"
          class="border border-zinc-300 p-3 rounded-lg placeholder:text-zinc-500 text-lg">
      </div>
      <div class="flex flex-col">
        <label for="txtTime" class="text-xl font-medium">Horas</label>
        <input type="number" formControlName="time" name="txtTime" id="txtTime" min="1" value="1"
          class="border border-zinc-300 p-3 rounded-lg text-lg">
      </div>
      <div class="flex flex-col">
        <label for="txtImage" class="text-xl font-medium">Imagem</label>
        <input type="text" formControlName="image" id="txtImage" name="txtImage" placeholder="http://discord/image"
          class="border border-zinc-300 p-3 rounded-lg text-lg">
      </div>
      <button type="button"
        class="w-full bg-zinc-900 text-white text-xl font-medium p-3 rounded-lg hover:bg-zinc-800 transition"
        (click)="adicionar()">Adicionar</button>
    </form>
  </section>

  <!-- Seção de Ranking -->
  <section class="bg-white shadow-xl p-5 w-full lg:w-1/2 flex flex-col gap-5 rounded-xl">
    <div class="flex w-full justify-between items-center">
      <h2 class="text-3xl font-bold">Ranking por Call</h2>
      <button type="button"
        class="flex items-center gap-2 bg-zinc-900 text-white p-3 rounded-md hover:bg-zinc-800 transition"
        (click)="salvarComoImagem()">
        <lucide-icon name="Download"></lucide-icon>
        <span>Baixar Ranking</span>
      </button>
    </div>

    <div #targetElement class="w-full flex flex-col justify-center items-center gap-5 bg-white p-4 rounded-lg border border-zinc-200">
      <div class="flex flex-col justify-center items-center">
        <h3 class="text-2xl font-bold">Participação em chamadas (Ranking)</h3>
        <p class="text-lg italic">Porque sair da call é opcional, mas subir no ranking é obrigação.</p>
      </div>
      <div class="w-full flex flex-col gap-3 pr-2">
        @for (item of components; track components) {
          <div class="w-full min-h-[6rem] rounded-lg shadow-md flex justify-between items-center gap-4 p-3">
            <div class="flex gap-4 items-center">
              <h4 class="text-2xl font-bold">{{item.rank}}º</h4>
              @if (item.rank == 1) {
                <img [src]="item.image" alt="Imagem do usuário" class="h-20 w-20 object-cover rounded-lg border-4 border-yellow-500">
              } @else if (item.rank == 2) {
                <img [src]="item.image" alt="Imagem do usuário" class="h-20 w-20 object-cover rounded-lg border-4 border-zinc-500">
              } @else if (item.rank == 3) {
                <img [src]="item.image" alt="Imagem do usuário" class="h-20 w-20 object-cover rounded-lg border-4 border-yellow-800">
              } @else {
                <img [src]="item.image" alt="Imagem do usuário" class="h-20 w-20 object-cover rounded-lg border border-zinc-300">
              }
              <div class="flex flex-col">
                <h5 class="text-xl font-semibold">{{item.name}}</h5>
                <div class="flex text-zinc-600 gap-4 text-lg">
                  <div class="flex items-center gap-1">
                    <lucide-icon name="Trophy"></lucide-icon>
                    <span>Rank: {{item.rank}}</span>
                  </div>
                  <div class="flex items-center gap-1">
                    <lucide-icon name="Clock"></lucide-icon>
                    <span>Horas: {{item.time}}</span>
                  </div>
                </div>
              </div>
            </div>
            @if (item.rank == 1) {
              <h1 class="text-yellow-500 text-lg font-medium">Callstrofóbico Supremo</h1>
            } @else if (item.rank == 2) {
              <h1  class="text-zinc-500 text-lg font-medium">Respira por Headset</h1>
            } @else if (item.rank == 3) {
              <h1 class="text-yellow-800 text-lg font-medium">Conectou... e Sumiu</h1>
            }
            @if (item.rank == 1) {
              <lucide-icon name="Crown" class="text-yellow-500 text-2xl"></lucide-icon>
            } @else if (item.rank == 2) {
              <lucide-icon name="Crown" class="text-zinc-500 text-2xl"></lucide-icon>
            } @else if (item.rank == 3) {
              <lucide-icon name="Crown" class="text-yellow-800 text-2xl"></lucide-icon>
            }
          </div>
        }
      </div>
      <p class="text-zinc-500 w-full text-center text-xl">Servidor StarCode</p>
    </div>
  </section>
</main>